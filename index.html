<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Finanças Pessoais</title>
  <meta name="description" content="App simples de controle financeiro pessoal" />
 https://priscilafischer1516-boop.github.io/Financas-pessoais/
</head>
<body>
  <header>
    <h1 aria-label="Finanças Pessoais">Finanças</h1>
    <div class="actions">
      <button id="shareBtn" aria-label="Compartilhar app">Compartilhar</button>
      <button id="exportBtn" aria-label="Exportar dados">Exportar CSV</button>
      <button id="clearBtn" class="danger" aria-label="Apagar tudo">Apagar</button>
    </div>
  </header>

  <main class="grid">
    <section class="card" aria-labelledby="resumo-title">
      <h2 id="resumo-title" style="margin-top:0;">Resumo</h2>
      <div class="summary">
        <div class="item saldo">
          <div class="label">Saldo</div>
          <div class="value" id="saldo">R$ 0,00</div>
        </div>
        <div class="item entradas">
          <div class="label">Entradas</div>
          <div class="value" id="entradas">R$ 0,00</div>
        </div>
        <div class="item saídas">
          <div class="label">Saídas</div>
          <div class="value" id="saidas">R$ 0,00</div>
        </div>
      </div>

      <div class="filters" style="margin-top:14px;">
        <button id="prevMonth" aria-label="Mês anterior">◀ Mês</button>
        <div class="kbd" id="monthLabel" aria-live="polite">—</div>
        <button id="nextMonth" aria-label="Próximo mês">Mês ▶</button>
        <input type="month" id="monthPicker" aria-label="Selecionar mês" />
        <button id="resetMonth" aria-label="Ver todos">Todos</button>
      </div>
    </section>

    <section class="card" aria-labelledby="add-title">
      <h2 id="add-title" style="margin-top:0;">Adicionar lançamento</h2>
      <form id="form">
        <div class="field">
          <label for="tipo">Tipo</label>
          <div class="type-toggle" role="group" aria-label="Tipo de lançamento">
            <button type="button" id="btnEntrada" class="in" aria-pressed="true">Entrada</button>
            <button type="button" id="btnSaida" class="out" aria-pressed="false">Saída</button>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="valor">Valor</label>
            <input id="valor" type="number" step="0.01" min="0" placeholder="Ex.: 1500,00" required />
          </div>
          <div class="field">
            <label for="categoria">Categoria</label>
            <input id="categoria" type="text" placeholder="Ex.: Salário, Mercado" required />
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label for="data">Data</label>
            <input id="data" type="date" required />
          </div>
          <div class="field">
            <label for="descricao">Descrição</label>
            <input id="descricao" type="text" placeholder="Detalhes (opcional)" />
          </div>
        </div>

        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px;">
          <button type="submit" class="primary">Salvar</button>
          <button type="reset">Limpar</button>
        </div>
      </form>
    </section>

    <section class="card" aria-labelledby="list-title" style="grid-column: 1 / -1;">
      <h2 id="list-title" style="margin-top:0;">Lançamentos</h2>
      <div class="list">
        <table aria-describedby="monthLabel">
          <thead>
            <tr>
              <th>Data</th>
              <th>Descrição</th>
              <th>Categoria</th>
              <th>Tipo</th>
              <th>Valor</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <tr><td colspan="6" class="empty">Sem lançamentos</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
    Dica: use o filtro de mês para ver seus resultados mensais. Os dados ficam salvos neste dispositivo.
  </footer>

  <script>
    const storageKey = 'financas_lancamentos_v1';
    let lancamentos = JSON.parse(localStorage.getItem(storageKey) || '[]');
    let currentFilter = { year: null, month: null }; // 1-12

    const formatBRL = (n) => n.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    const parseNumber = (v) => {
      const n = Number(v);
      return Number.isFinite(n) ? n : 0;
    };

    // UI elements
    const saldoEl = document.getElementById('saldo');
